# Copilot Instructions for Mes Recettes

## Project Overview
This is a Blazor WebAssembly application called "Mes Recettes" (My Recipes) for managing recipe collections. The application uses Supabase as the backend database and MudBlazor for the UI components.

## Tech Stack
- **Frontend**: Blazor WebAssembly (.NET 9.0)
- **UI Framework**: MudBlazor
- **Backend**: Supabase (PostgreSQL)
- **ORM**: Supabase .NET client
- **Language**: C# with implicit usings and nullable reference types enabled
- **GitHub Operations**: Use GitHub MCP server for PRs, issues, and repository management

## Architecture & Patterns
- Follow Blazor component patterns with `.razor` files
- Use dependency injection for services
- Implement async/await patterns for database operations
- Use MudBlazor components for consistent UI
- Follow the existing project structure with Pages, Models, Services, and Layout folders

## Key Models
- `Recipe`: Main entity with Name, Rating, Notes, Book reference, and Page number
- `Book`: Recipe book entity with Title, Author reference
- `Author`: Author entity for cookbook authors

## Coding Guidelines
1. Use nullable reference types (`string?` for optional fields)
2. Follow existing naming conventions (PascalCase for public members)
3. Use Supabase attributes for model mapping (`[Table]`, `[Column]`, `[PrimaryKey]`)
4. Implement proper error handling for async operations
5. Use MudBlazor components consistently with the existing design
6. Follow the existing dialog pattern for CRUD operations
7. Maintain consistent styling with the existing CSS structure

## Database Context
- Tables: `recettes` (recipes), `books`, `authors`
- Use Supabase client for all database operations
- Follow the existing pattern of injecting SupabaseClient into services

## When suggesting code:
- Always use the existing project patterns and conventions
- Suggest MudBlazor components over plain HTML when appropriate
- Include proper error handling and loading states
- Follow the existing authentication patterns if present
- Use the established service layer for data access

## Development Workflow
- **Always create a new branch** for any changes - never work directly on main
- Use descriptive branch names that reflect the feature or fix being implemented
- **Always validate changes before committing** - use git tools to review modifications
- **Run the application to test changes** - execute the app to validate functionality works as expected
- **Write comprehensive unit tests** - add unit tests for ALL new functionality before creating PRs
- **Achieve high test coverage** - aim for comprehensive coverage of business logic, models, and services
- **Run tests before committing** - ensure `dotnet test` passes with all tests
- **Confirm changes with user before creating commits or PRs** - show validation and get approval
- Commit changes with clear, descriptive messages
- **Use GitHub MCP server** for all GitHub operations (PRs, issues, reviews, etc.)

## Unit Testing Requirements
- **Mandatory for all PRs**: No pull request should be created without comprehensive unit tests
- **Test file naming**: Use descriptive names matching the classes being tested (e.g., `RecipeModelTests.cs`)
- **Test patterns**: Follow Arrange-Act-Assert pattern with descriptive test method names
- **Test coverage**: Include both valid and invalid scenarios, edge cases, and business rule validation
- **xUnit framework**: Use xUnit with Theory tests for multiple data scenarios
- **Run tests**: Always run `dotnet test` before committing and ensure all tests pass

## GitHub Operations
- Always use GitHub MCP server tools instead of CLI commands
- For PRs: `mcp_github_create_pull_request`
- For issues: `mcp_github_create_issue`, `mcp_github_update_issue`
- For comments: `mcp_github_add_issue_comment`

### Documentation Requirements
- **Update All Copilot Files**: When creating a new branch for any feature or modification, update these instruction files as needed:
  - `/.github/copilot-instructions.md` - Comprehensive development guidelines
  - `/.copilot-instructions.md` - Quick reference for common patterns
  - `/COPILOT_CONTEXT.md` - Business domain and user context
- **Update Project Documentation**: For every modification, ensure documentation in the `/docs` folder is updated to reflect:
  - New features and functionality
  - API changes or new endpoints
  - Configuration changes
  - Setup or deployment procedures
  - User-facing changes or new workflows
- **Update README files**: Maintain both main `README.md` and `docs/README.md` with current information
- **Keep Documentation Synchronized**: Maintain consistency across all documentation to ensure accuracy and usefulness for future development
